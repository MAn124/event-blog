import{$ as W,B as n,C as a,Ca as et,D as v,G as q,Ga as it,H as S,I as f,J as L,K as z,L as G,La as M,M as m,N as y,O as J,T as K,U as D,W as I,Wa as ot,X as b,Y as U,Z as Q,aa as T,b as g,ba as j,c as $,ca as X,da as F,ea as B,f as x,fa as k,g as E,h as C,j as _,k as P,l as A,la as Y,m as H,n as O,oa as Z,pa as tt,q as R,s as V,t as p,u as h,y as d,z as c}from"./chunk-ESGM5Y7L.js";var l="http://localhost:8080/v1/api";var rt=(()=>{let t=class t{constructor(o){this.http=o,this.baseUrl=l+"/post/list"}getAllPosts(){return this.http.get(this.baseUrl).pipe(g(o=>o.data))}getPost(o){let i=`${l}/post/detail/${o}`;return console.log(i),this.http.get(i)}create(o){let i=l+"/post/create";return this.http.post(i,o)}update(o,i){let s=`${l}/post/update/${o}`;return this.http.put(s,i)}delete(o){let i=`${l}/post/${o}`;return this.http.delete(i)}};t.\u0275fac=function(i){return new(i||t)(C(k))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var st=(()=>{let t=class t{constructor(o){this.http=o,this.apiLike=l+"/likes"}toggleLike(o){return this.http.post(`${this.apiLike}`,o)}};t.\u0275fac=function(i){return new(i||t)(C(k))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var at=(()=>{let t=class t{constructor(o){this.likeService=o,this.isLiked=!1}ngOnInit(){this.getIsLiked()}getIsLiked(){}toggleLike(){this.likeService.toggleLike(this.postId).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o)}})}};t.\u0275fac=function(i){return new(i||t)(h(st))},t.\u0275cmp=_({type:t,selectors:[["app-like-button"]],inputs:{postId:"postId"},decls:4,vars:2,consts:[[1,"flex","align-items-center","justify-content-center","gap-2"],[1,"pi","pi-heart",2,"font-size","22px",3,"click","ngClass"]],template:function(i,s){i&1&&(n(0,"div",0)(1,"i",1),S("click",function(){return s.toggleLike()}),a(),n(2,"p"),m(3,"10 likes"),a()()),i&2&&(p(),z("ngClass","",s.isLiked?"pi-heart-fill ":" pi-heart"," "))},dependencies:[W]});let e=t;return e})();var ct=(()=>{let t=class t{constructor(o){this.http=o,this.baseUrl=l+"/user/list"}getAllUsers(){return this.http.get(this.baseUrl).pipe(g(o=>o.data))}getUser(o){let i=`${l}/user/detail/${o}`;return this.http.get(i)}create(o){let i=l+"/user/create";return this.http.post(i,o)}update(o,i){let s=`${l}/user/update/${o}`;return this.http.put(s,i)}searchUser(o){let i=`${l}&search=${o}`;return this.getUserBySearch(i)}getUserBySearch(o){return this.http.get(o).pipe(g(i=>i.data))}};t.\u0275fac=function(i){return new(i||t)(C(k))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var N=(()=>{let t=class t{constructor(o){this.userService=o}transform(o){return this.userService.getUser(o).pipe($(i=>i!=null&&i!=null),g(i=>i.email))}};t.\u0275fac=function(i){return new(i||t)(h(ct,16))},t.\u0275pipe=A({name:"userIdToName",type:t,pure:!0});let e=t;return e})();function It(e,t){if(e&1&&(n(0,"small"),m(1),I(2,"userIdToName"),I(3,"async"),a()),e&2){let r=f(2);p(),y(b(3,3,b(2,1,r.post.createBy)))}}function xt(e,t){if(e&1&&v(0,"p-tag",10),e&2){let r=t.$implicit;L("value",r),c("rounded",!0)}}function Ct(e,t){if(e&1&&(n(0,"div")(1,"h1",3),m(2),a(),n(3,"div",4),d(4,It,4,5,"small",5),n(5,"span"),m(6,"|"),a(),n(7,"small"),m(8),I(9,"date"),a()(),n(10,"div",6),d(11,xt,1,2,"p-tag",7),a(),n(12,"div",8),v(13,"div",9),a()()),e&2){let r=f();p(2),y(r.post.title),p(2),c("ngIf",r.post.createBy),p(4),y(U(9,5,r.post.createAt,"HH:mm:ss dd/MM/yyyy")),p(3),c("ngForOf",r.post.tags),p(2),c("innerHTML",r.post.content,V)}}function _t(e,t){if(e&1&&v(0,"app-like-button",11),e&2){let r=f();c("postId",r.post.id)}}function kt(e,t){e&1&&(n(0,"p"),m(1,"No content available"),a())}var Dt=(()=>{let t=class t{constructor(o,i){this.activeRoute=o,this.postService=i,this.postId="",this.post={}}ngOnInit(){console.log("ngOnInit called"),this.postId=this.activeRoute.snapshot.paramMap.get("id")||"",console.log("Post ID:",this.postId),this.getPost(this.postId)}getPost(o){this.postService.getPost(o).subscribe({next:i=>{console.log("Post data:",i),this.post=i.data},error:i=>{console.log("No post data received")}})}};t.\u0275fac=function(i){return new(i||t)(h(Y),h(rt))},t.\u0275cmp=_({type:t,selectors:[["app-post-detail"]],decls:4,vars:3,consts:[["noContent",""],[4,"ngIf","ngIfElse"],[3,"postId",4,"ngIf"],[1,"text-center"],[1,"flex","justify-content-center","gap-2"],[4,"ngIf"],[1,"flex","gap-1","justify-content-center","my-2","mb-4"],[3,"value","rounded",4,"ngFor","ngForOf"],[1,"ql-snow"],[1,"ql-editor","m-auto","col-12","lg:col-8",3,"innerHTML"],[3,"value","rounded"],[3,"postId"]],template:function(i,s){if(i&1&&d(0,Ct,14,8,"div",1)(1,_t,1,1,"app-like-button",2)(2,kt,2,0,"ng-template",null,0,Q),i&2){let w=G(3);c("ngIf",s.post)("ngIfElse",w),p(),c("ngIf",s.post.id)}},dependencies:[T,j,M,at,X,F,N]});let e=t;return e})();var bt=()=>[],mt=e=>[e];function Et(e,t){if(e&1&&(n(0,"small"),m(1),I(2,"userIdToName"),a()),e&2){let r=f();p(),y(b(2,1,r.post.createBy))}}function Pt(e,t){if(e&1&&v(0,"p-tag",8),e&2){let r=t.$implicit;L("value",r),c("rounded",!0)}}function St(e,t){if(e&1){let r=q();n(0,"p-button",9),S("click",function(){H(r);let i=f();return O(i.isEdit.emit())}),a()}}function Lt(e,t){if(e&1&&v(0,"p-button",10),e&2){let r=f();c("routerLink",D(1,mt,"./posts/"+r.post.id))}}var Vt=(()=>{let t=class t{constructor(){this.isEdit=new R}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=_({type:t,selectors:[["app-post"]],inputs:{post:"post",canEdit:"canEdit"},outputs:{isEdit:"isEdit"},decls:13,vars:13,consts:[[1,"border-1","border-solid","p-4","flex","flex-column",3,"routerLink"],[1,"flex","justify-content-between"],[4,"ngIf"],[1,"flex","gap-1"],[3,"value","rounded",4,"ngFor","ngForOf"],[1,"mt-2","flex","gap-2","justify-content-end"],["label","Edit","severity","success",3,"click",4,"ngIf"],["label","Details","severity","primary",3,"routerLink",4,"ngIf"],[3,"value","rounded"],["label","Edit","severity","success",3,"click"],["label","Details","severity","primary",3,"routerLink"]],template:function(i,s){i&1&&(n(0,"div",0)(1,"div",1),d(2,Et,3,3,"small",2),n(3,"small"),m(4),I(5,"date"),a()(),n(6,"h3"),m(7),a(),n(8,"div",3),d(9,Pt,1,2,"p-tag",4),a(),n(10,"div",5),d(11,St,1,0,"p-button",6)(12,Lt,1,3,"p-button",7),a()()),i&2&&(c("routerLink",s.canEdit?K(10,bt):D(11,mt,"./posts/"+s.post.id)),p(2),c("ngIf",s.post.createBy),p(2),y(U(5,7,s.post.createAt,"HH:mm:ss dd/MM/yyyy")),p(3),J(" ",s.post.title," "),p(2),c("ngForOf",s.post.tags),p(2),c("ngIf",s.canEdit),p(),c("ngIf",s.canEdit))},dependencies:[T,j,et,M,Z,F,N]});let e=t;return e})();var dt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=P({type:t}),t.\u0275inj=E({imports:[B]});let e=t;return e})();var le=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=P({type:t}),t.\u0275inj=E({imports:[B,ot,dt,it,tt]});let e=t;return e})();export{rt as a,ct as b,Vt as c,Dt as d,le as e};
